/*
* @Author: alex
* @Date: 2025-08-22 15:34:48
 * @Last Modified by: alex
 * @Last Modified time: 2025-08-29 11:13:58
*/

<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Leaf Sim</title>

  <!-- three.js import map (for later JS work) -->
  <script type="importmap">
    {
      "imports": {
        "three": "https://unpkg.com/three@0.161.0/build/three.module.js",
        "echarts": "https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.esm.min.js"
      }
    }
  </script>

  <link rel="stylesheet" href="./style/style.css">
</head>

<body>
  <!-- Template for example text -->
  <template id="repeated-text">
    <div class="copy">
      <div class="text">
        <p>Here are some words that you may want to read.</p>
        <p>You also may not want to read them.</p>
        <p>But by now you've already read them.</p>
        <p style="color:#af2ea9">(<span data-idx></span> out of <span data-total></span>)</p>
      </div>
      <div class="spacer"></div>
    </div>
  </template>

  <!-- Horizontal strip with three pages -->
  <div id="page-strip">

    <!-- ========== PAGE 1 ========== -->
    <section class="page" id="page-1">
      <div class="page-shell">
        <header class="page-header">
          <div class="center-col">
            <h1>Alex Ogren</h1>
            <a href="https://www.github.com/aco8ogren" class="nav-link">my github</a>
            <a href="#page-3" class="nav-link">CV</a>
            <nav class="nav-row">
              <!-- first page -->
              <a href="#page-2" class="nav-link next">next →</a>
            </nav>
          </div>
        </header>

        <div class="page-body scroller" id="pbs1" data-camera-scroll-source>
          <div class="container" style="display: flex; justify-content: center;">
            <img src="graphics/rollerblading_new.png" style="width: 80%">
          </div style>


          <p style="text-align: justify">I'm a math-minded engineer who enjoys building things, both abstract and real, especially when the project
            involves learning something new. On this site you will find information about my talents, projects,
            education, interests, and more.</p>
          <h4>Education</h4>
          <p>I grew up in the Twin Cities of Minnesota, went to undergrad at University of Wisconsin - Madison (B.S.
            Engineering Mechanics + B.S. Applied Math), and scooped up a PhD from Caltech.</p>
          <div class="spacer"></div>
        </div>
      </div>
    </section>

    <!-- ========== PAGE 2 ========== -->
    <section class="page" id="page-2">
      <div class="page-shell">
        <header class="page-header">
          <div class="center-col">
            <h1>falling leaves — page 2</h1>
            <nav class="nav-row">
              <!-- middle page -->
              <a href="#page-1" class="nav-link prev">← prev</a>
              <a href="#page-3" class="nav-link next">next →</a>
            </nav>
          </div>
        </header>

        <div class="page-body scroller" id="pbs2" data-camera-scroll-source>
          <div id="copies-target-2"></div>
        </div>
      </div>
    </section>

    <!-- ========== PAGE 3 ========== -->
    <section class="page" id="page-3">
      <div class="page-shell">
        <header class="page-header">
          <div class="center-col">
            <h1>falling leaves — page 3</h1>
            <nav class="nav-row">
              <!-- last page -->
              <a href="#page-2" class="nav-link prev">← prev</a>
            </nav>
          </div>
        </header>

        <div class="page-body scroller" id="pbs3" data-camera-scroll-source>
          <div id="copies-target-3"></div>
        </div>
      </div>
    </section>


  </div>

  <!-- Call the util AFTER the DOM exists; import via inline module -->
  <script type="module">
    import { copyElementNTimes } from './js/util.js';
    copyElementNTimes('repeated-text', 6, 'copies-target-1');
    copyElementNTimes('repeated-text', 3, 'copies-target-2');
    copyElementNTimes('repeated-text', 8, 'copies-target-3');
  </script>
</body>

<script>
  // Auto-show scrollbars on scroll/hover; hide after no activity
  (function attachAutoHide() {
    const AUTOHIDE_MS = 1000; // time to hide after last scroll/hover

    function wire(el, timeout = AUTOHIDE_MS) {
      if (!el) return;
      let hideId = 0;

      const show = () => {
        el.classList.add('scrollbars-visible');
        clearTimeout(hideId);
        hideId = setTimeout(() => el.classList.remove('scrollbars-visible'), timeout);
      };

      el.addEventListener('scroll', show, { passive: true });
      el.addEventListener('mouseenter', show);
      el.addEventListener('mouseleave', () => el.classList.remove('scrollbars-visible'));
      el.addEventListener('touchstart', show, { passive: true });
      el.addEventListener('touchend', () => {
        clearTimeout(hideId);
        hideId = setTimeout(() => el.classList.remove('scrollbars-visible'), timeout);
      }, { passive: true });

      // start hidden; reveal briefly so users discover it
      setTimeout(show, 50);
    }

    document.querySelectorAll('.scroller').forEach(el => wire(el));
  })();
</script>

<script type="module" src="./js/leaf_sim/leaf_sim.js">
  // import { view } from src;

  // const strip = document.getElementById('page-strip');
  // const pages = Array.from(strip.querySelectorAll('.page'));

  // function scrollerFor(page) {
  //   return (
  //     page.querySelector('[data-camera-scroll-source]') ||
  //     page.querySelector(':scope .page-body.scroller') ||
  //     page.querySelector(':scope .scroller')
  //   );
  // }

  // const scrollers = pages.map(scrollerFor);

  // // Set scroll sources
  // view.setScrollSource({ x: strip, y: scrollers });
</script>

<!-- ECharts debug overlay -->
<div class="camera-position-plot" id="cam-plot" style="display: none">

</div>

</html>
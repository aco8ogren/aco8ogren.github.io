/* ./style/style4.css
/*
 * @Author: alex 
 * @Date: 2025-08-22 15:34:00 
 * @Last Modified by: alex
 * @Last Modified time: 2025-09-15 18:21:36
 */
/* =========================
   0) THEME VARIABLES
   ========================= */
:root {
    /* scrollbar */
    --sb-size: 10px;
    --sb-thumb: rgba(142, 197, 255, .82);
    --sb-thumb-hover: rgba(142, 197, 255, .95);
    --sb-track: transparent;
    --sb-radius: 8px;

    /* layout rhythm */
    --col-max: min(62ch, 94vw);
}

/* =========================
   1) BASE
   ========================= */
* {
    box-sizing: border-box;
}

html,
body {
    margin: 0;
    height: 100%;
    overflow: hidden;
    background: #ee08ea;
    color: #eaf2ff;
    font: 16px/1.55 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
    z-index: -10000;
}

a {
    color: #8ec5ff;
    text-decoration: none;
}

a:hover,
a:focus {
    text-decoration: underline;
}

/* =========================
   2) HORIZONTAL PAGE STRIP
   ========================= */
#page-strip {
    position: fixed;
    inset: 0;
    display: grid;
    grid-auto-flow: column;
    grid-auto-columns: 100vw;
    /* each page = viewport width */
    height: 100vh;
    overflow-x: auto;
    overflow-y: hidden;
    scroll-snap-type: x mandatory;
    scroll-behavior: smooth;
    z-index: 5;

    /* hide strip scrollbar */
    scrollbar-width: none;
    /* Firefox */
}

#page-strip::-webkit-scrollbar {
    width: 0;
    height: 0;
}

/* WebKit */


.resume .entry {
    display: grid;
    grid-template-columns: 1fr auto;
    grid-template-areas:
        "organization location"
        "position date-range";
    align-items: baseline;
    column-gap: .5rem;
    row-gap: .2rem;
    margin: 0.88em 0;
}

.resume .entry .location {
    opacity: 0.85;
    grid-area: location;
    justify-self: end;
}

.resume .entry .organization {
    grid-area: organization;
}

.resume .entry .date-range {
    grid-area: date-range;
    justify-self: end;
}

.resume .entry .position {
    grid-area: position;
}

/* ========== Publications Card ========== */
:root {

    /* card tones */
    --card-bg: rgba(25, 40, 70, 0.9);
    /* dark blue-gray */
    --card-text: #eaf2ff;
    /* near-white text (matches your body) */
    --card-muted: #b7c9e7;
    /* softer text for authors */
    --card-border: rgba(255, 255, 255, 0.14);
    /* subtle light border */

    --pub-gap: 0.8rem;
    --pub-pad: 1rem;
    --pub-thumbnail-w: 140px;
    /* default thumbnail width */
    --pub-thumbnail-r: 1 / 1;
    /* aspect ratio (w/h) */
    --pub-radius: 12px;
    --pub-border: 1px solid color-mix(in oklab, CanvasText 12%, transparent);
}

/* override with OKLCH darkening if supported */
@supports (color: oklch(50% 0 0)) {
    :root {
        --card-bg: color-mix(in oklch, var(--scroller-bg) 85%, black);
        --card-border: color-mix(in oklch, var(--scroller-bg) 15%, black);
        --card-text: color-mix(in oklch, var(--card-bg) 12%, white);
        --pub-muted: color-mix(in oklab, var(--card-text) 80%, transparent);
    }
}

/* Container for a list */
.pubs {
    display: grid;
    gap: 1rem;
}

/* One publication card */
.pub-card {
    display: grid;
    grid-template-columns: 1fr;
    grid-template-rows: auto 1fr;
    grid-template-areas:
        "row-1"
        "row-2";
    gap: var(--pub-gap);
    padding: var(--pub-pad);
    border: var(--pub-border);
    border-radius: var(--pub-radius);
    background: var(--card-bg) !important;
    color: var(--card-text);
}

/* Simple title (header) */
.pub-row-1 {
    grid-area: row-1;
    display: grid;
    grid-template-columns: minmax(0, 1fr) fit-content(24ch);
    grid-template-areas:
        "simple-title simple-title";
    align-items: center;
    margin: 0;
}

.pub-row-2 {
    grid-area: row-2;
    display: grid;
    gap: 0px 12px;
    grid-template-columns: minmax(108px, var(--pub-thumbnail-w)) 1fr;
    grid-template-rows: auto auto auto auto;
    grid-template-areas:
        "thumbnail full-title"
        "thumbnail journal"
        "thumbnail authors"
        "thumbnail keywords";
}

.pub-simple-title {
    display: block;
    text-align: start;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    grid-area: simple-title;
    font-size: clamp(1rem, 0.9rem + 0.4vw, 1.25rem);
    line-height: 1.25;
    font-weight: 700;
    min-width: 0;
}

.pub-journal {
    display: block;
    overflow: hidden;
    text-overflow: ellipsis;
    grid-area: journal;
    justify-self: start;
    text-align: start;
    font-size: clamp(1rem, 0.9rem + 0.4vw, 1.25rem);
    line-height: 1.25;
    font-weight: 700;
    font-size: 0.9em;
    opacity: 0.5;
    min-width: 0;
}

/* .pub-keywords {
    display: block;
    overflow: hidden;
    text-overflow: ellipsis;
    grid-area: keywords;
    justify-self: start;
    text-align: start;
    font-size: 0.8rem;
    opacity: 0.5;
    min-width: 0;
} */

.pub-keywords {
    display: flex;
    flex-wrap: wrap;
    gap: .35rem;
    margin-top: .35rem;
}

.pub-keyword-bar {
    display: flex;
    flex-wrap: wrap;
    gap: .35rem;
}

/* Keyword chips as buttons */
.keyword {
    appearance: none;
    border: 1px solid var(--card-border);
    background: color-mix(in oklab, var(--card-text) 10%, transparent);
    color: var(--card-text);
    border-radius: 999px;
    /* pill */
    padding: .2rem .6rem;
    font: inherit;
    font-size: .78em;
    line-height: 1.1;
    display: inline-flex;
    align-items: center;
    gap: .3rem;
    cursor: pointer;
    user-select: none;
    transition: background-color 120ms ease, border-color 120ms ease,
        transform 120ms ease, box-shadow 120ms ease;
}

.keyword:hover {
    background: color-mix(in oklab, var(--card-text) 16%, transparent);
}

.keyword:active {
    transform: translateY(1px) scale(0.98);
}

.keyword:focus-visible {
    outline: none;
    box-shadow: 0 0 0 2px color-mix(in oklab, var(--card-text) 22%, transparent);
}

/* Selected/toggled state (use aria-pressed="true" or .is-active) */
.keyword[aria-pressed="true"],
.keyword.is-active {
    background: color-mix(in oklab, var(--card-text) 22%, transparent);
    /* background: black; */
    border-color: color-mix(in oklab, var(--card-text) 35%, transparent);
}

/* Disabled state */
.keyword:disabled {
    opacity: .5;
    /* cursor: not-allowed; */
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
    .keyword {
        transition: none;
    }
}

/* Keyword operator control */
.kw-sec-label {
    font-size: .8rem;
    opacity: .8;
    letter-spacing: .06em;
}

.kw-ops {
    display: flex;
    flex-direction: column;
    gap: .35rem;
    margin: .25rem 0 .5rem;
}

.kw-ops .ops-group {
    display: inline-flex;
    gap: .35rem;
}

.kw-summary {
    font-size: .86rem;
    opacity: .9;
}

.kw-ops .op-toggle.keyword {
    border-radius: 8px;
    /* was pill; now slightly boxy */
    padding-block: .35rem;
    padding-inline: .65rem;
}

.kw-summary .keyword.kw-badge {
    font-size: .82em;
    padding: .15rem .55rem;
    vertical-align: baseline;
    pointer-events: none;
    /* purely informational */
    cursor: default;
}

.filters {
    font-size: 0.88em;
    margin: .5rem .5rem 1rem;
    border: 1px solid var(--card-border);
    border-radius: 10px;
    background: color-mix(in oklab, var(--card-text) 6%, transparent);
}


/* Hide built-in disclosure markers for all details/summary */
details > summary { list-style: none; cursor: pointer;}
details > summary::-webkit-details-marker { display: none; }
details > summary::marker { content: ""; }

/* Universal maple-leaf "chevron" for every summary */
details > summary::before {
  content: "";
  display: inline-block;
  inline-size: 1.4rem;
  block-size: 1.4rem;
  margin-right: 0.5rem;
  margin-top: 0.2rem;
  margin-bottom: 0.2rem;
  margin-left: 0.3rem;

  /* color via currentColor, shape via mask */
  background-color: currentColor;
  -webkit-mask: url("../graphics/maple_leaf_chevron.svg") center / contain no-repeat;
  mask: url("../graphics/maple_leaf_chevron.svg") center / contain no-repeat;

  /* optional affordance */
  transition: transform 240ms ease;
  vertical-align: 0em;
}
details[data-state="open"] > summary::before {
  /* rotate if you like; set to 0deg if you don't want motion */
  transform: rotate(90deg);
}

/* smooth open/close with height (JS drives the values) */
.filters-panel {
  display: block;            /* was grid */
  overflow: hidden;          /* clip during animation */
  height: 0;                 /* closed baseline; JS will set/reset */
  transition: height 280ms cubic-bezier(.2,.7,.2,1);
}

.filters-panel { will-change: height; }

/* the inner wrapper actually holds content and clips during the transition */
.filters-panel > .filter-container {
  overflow: hidden;
  padding: 0.1rem .6rem;      /* keep your interior padding */
}

/* optional: tighten spacing of controls in the panel */
.filters .kw-sec-label { margin-top: .25rem; }

/* Make the summary bar comfy and consistent */
.filters > summary {
  display: flex;
  align-items: center;
  gap: .6rem;
  padding: .5rem .65rem;     /* ← breathing room */
  line-height: 1.25;
  min-height: 2.25rem;       /* predictable tap target */
  font-weight: 600;
  cursor: pointer;
  user-select: none;
}

/* Tidy the chevron spacing specifically for filters */
.filters > summary::before {
  margin: 0 .45rem 0 .2rem;  /* override the generic top/bottom margins */
}

/* Keep the clear button out on the right edge */
.filters > summary .clear-filters {
  margin-left: auto;
}


/* Thumbnail block */

.pub-thumbnail {
    grid-area: thumbnail;
    width: 100%;
    max-width: var(--pub-thumbnail-w);
    aspect-ratio: var(--pub-thumbnail-r);
    border-radius: 8px;
    overflow: hidden;
    background: color-mix(in oklab, CanvasText 6%, transparent);
}

.pub-thumbnail>img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    /* contain if you prefer letterboxing */
    display: block;
}

/* Full title */
.pub-full-title {
    grid-area: full-title;
    margin: 0;
    font: inherit;
    font-weight: 600;
    line-height: 1.3;
}

/* Authors */
.pub-authors {
    grid-area: authors;
    margin: 0;
    color: var(--pub-muted);
    line-height: 1.35;
}

/* Optional: subtle link styles for titles */
.pub-card a {
    color: inherit;
    text-decoration-thickness: 1px;
    text-underline-offset: 2px;
}

.pub-card a:hover {
    text-decoration-thickness: 2px;
}

.page {
    position: relative;
    height: 100%;
    scroll-snap-align: start;
}

/* Default scroller */
:root {
    --scroller-bg: rgba(38, 59, 100, 0.682);
}

.scroller {
    position: relative;
    overflow-y: auto;
    overscroll-behavior: contain;
    max-width: var(--col-max);
    margin: 0 auto;
    padding: 3em;
    background-color: var(--scroller-bg);
    /* #0a567438 */
    backdrop-filter: blur(1px);

    /* Prevent layout shift when scrollbar appears/disappears */
    scrollbar-gutter: stable;
    /* or: stable both-edges */

    /* Keep a consistent scrollbar width in all states */
    scrollbar-width: thin;
    /* Firefox */
}

/* Fade X edges toward transparent */
.scroller.edge-fade-x {
    --fade: 6%;
    /* how much to fade on each side */
    -webkit-mask-image: linear-gradient(to right,
            rgba(0, 0, 0, 0) 0%,
            #000 calc(var(--fade)),
            #000 calc(100% - var(--fade)),
            rgba(0, 0, 0, 0) 100%);
    mask-image: linear-gradient(to right,
            rgba(0, 0, 0, 0) 0%,
            #000 calc(var(--fade)),
            #000 calc(100% - var(--fade)),
            rgba(0, 0, 0, 0) 100%);
    -webkit-mask-size: 100% 100%;
    mask-size: 100% 100%;
    -webkit-mask-repeat: no-repeat;
    mask-repeat: no-repeat;
}


/* WebKit/Blink: keep width fixed */
.scroller::-webkit-scrollbar {
    width: var(--sb-size);
    height: var(--sb-size);
}

/* “Hidden” look (default): transparent parts, still reserving space */
.scroller:not(.scrollbars-visible) {
    scrollbar-color: transparent transparent;
    /* Firefox */
}

.scroller:not(.scrollbars-visible)::-webkit-scrollbar-track {
    background: transparent;
}

.scroller:not(.scrollbars-visible)::-webkit-scrollbar-thumb {
    background-color: transparent;
}

/* “Visible” look (your styled colors) */
.scroller.scrollbars-visible {
    scrollbar-color: var(--sb-thumb) var(--sb-track);
}

.scroller.scrollbars-visible::-webkit-scrollbar-track {
    background: var(--sb-track);
}

.scroller.scrollbars-visible::-webkit-scrollbar-thumb {
    background-color: var(--sb-thumb);
    border-radius: var(--sb-radius);
    border: 2px solid transparent;
    background-clip: padding-box;
}

.scroller.scrollbars-visible:hover::-webkit-scrollbar-thumb {
    background-color: var(--sb-thumb-hover);
}


/* =========================
   4) PAGE SHELL LAYOUT
   ========================= */
.page-shell {
    position: absolute;
    inset: 0;
    display: grid;
    grid-template-rows: auto 1fr;
    /* header (auto) + body (fills) */
}

.center-horizontally {
    max-width: var(--col-max);
    margin: 0 auto;
    padding: 0px;
}

.header {
    background: rgba(38, 59, 100, 0.682);
    backdrop-filter: blur(4px);
    margin: 0px;
}

/* Fade X edges toward transparent */
.header.edge-fade-bottom {
    --fade: 6%;
    /* how much to fade on each side */
    -webkit-mask-image: linear-gradient(to bottom,
            rgba(0, 0, 0, 0) 0%,
            #000 calc(var(--fade)),
            #000 calc(100% - var(--fade)),
            rgba(0, 0, 0, 0) 100%);
    mask-image: linear-gradient(to bottom,
            rgba(0, 0, 0, 0) 0%,
            #000 calc(var(--fade)),
            #000 calc(100% - var(--fade)),
            rgba(0, 0, 0, 0) 100%);
    -webkit-mask-size: 100% 100%;
    mask-size: 100% 100%;
    -webkit-mask-repeat: no-repeat;
    mask-repeat: no-repeat;
}

/* =========================
   Resume (drop-in section)
   Target markup: <div class="resume" id="resume-asari">…</div>
   ========================= */

.resume .entry .organization {
    font-weight: 700;
}

.resume {
    /* Tunables */
    /* --resume-maxw: 980px; */
    --resume-rule: #c8c8c8;
    /* light gray rules (auto-swapped in dark mode) */
    --resume-accent: #333;
    /* section heading color */
    --resume-gap: 0.6rem;
    /* vertical rhythm baseline */

    font: inherit;
    color: inherit;
    line-height: 1.5;
    background: transparent;
    box-sizing: border-box;
    margin-inline: auto;
    /* max-width: var(--resume-maxw); */
}

.resume * {
    box-sizing: border-box;
}

/* Header */
.resume .resume-header {
    padding-block-end: calc(var(--resume-gap) * 1.25);
    margin-block-end: calc(var(--resume-gap) * 1.25);
    border-bottom: 1px solid var(--resume-rule);
}

.resume .resume-header h2 {
    margin: 0;
    font-weight: 700;
    letter-spacing: 0.01em;
    font-size: clamp(1.4rem, 2.2vw + 0.6rem, 2rem);
    line-height: 1.2;
}

.resume .resume-header p {
    margin: 0.35rem 0 0;
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem 0.75rem;
    align-items: center;
    font-size: 0.95rem;
}

.resume .resume-header a {
    text-decoration: none;
    border-bottom: 1px dotted currentColor;
}

.resume .resume-header a:hover,
.resume .resume-header a:focus-visible {
    border-bottom-style: solid;
}

/* Sections */
.resume section {
    margin-block: calc(var(--resume-gap) * 1.25);
}

.resume h3 {
    margin: 0 0 0.35rem;
    font-size: 1.1rem;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: currentColor;
}

/* Entries */
.resume h4 {
    /* two-column feel: title left, meta (location | dates) right; stacks on narrow */
    margin: 0.6rem 0 0.15rem;
    font-size: 1rem;
    font-weight: 600;
    display: grid;
    grid-template-columns: 1fr auto;
    gap: 0.5rem 1rem;
}

.resume h4 span {
    font-weight: 400;
    opacity: 0.8;
    text-align: right;
    white-space: nowrap;
}

.resume .date-range {
    opacity: 0.85;
    white-space: nowrap;
}


.resume article+article {
    margin-top: calc(var(--resume-gap) * 0.9);
    padding-top: calc(var(--resume-gap) * 0.9);
    /* border-top: 1px dashed var(--resume-rule); */
}

/* Lists */
.resume ul,
.resume ol {
    margin: 0.25rem 0 0.75rem 1.15rem;
    padding: 0;
}

.resume li {
    margin-block: 0.25rem;
}

/* Links (general) */
.resume a {
    color: inherit;
}

.resume a:hover,
.resume a:focus-visible {
    text-decoration: underline;
}

.page-body {
    /* often also has .scroller */
    overflow-y: auto;
    overscroll-behavior: contain;
    padding-bottom: 2rem;
}

.page-body.scroller {
    margin-top: 0px;
}

/* nav */
.nav-row {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    /* space between links on the left side */
    margin: 0.5rem 0;
    /* a little breathing room under the H1 */
    flex-wrap: wrap;
    /* mobile: allow wrapping */
}

.nav-row .next {
    margin-left: auto;
}

.nav-link {
    display: inline-block;
    padding: 0.25rem .40rem;
    border-radius: 8px;
    background: rgba(255, 255, 255, 0.034);
    border: 1px solid rgba(255, 255, 255, .12);
    color: #8ec5ff;
    display: inline-flex;
    align-items: center;
    gap: 0.35em;
    line-height: 1;
    vertical-align: middle;
    /* space between icon + text */
}

.nav-link:hover {
    text-decoration: underline;
}

.icon {
    inline-size: 1.1rem;
    block-size: 1.1rem;
    height: 1em;
    width: 1em;
    display: block;
}

.nav-link .icon {
    vertical-align: -0.15em;
    margin-right: 0em;
}

.copy {
    margin: 0 0 2rem 0;
}

.text {
    margin: 0 0 .5rem 0;
}

.spacer {
    height: 45vh;
}

/* =========================
   5) PLOTTING
   ========================= */

.hud-panel {
    position: fixed;
    right: 12px;
    width: 360px;
    height: 180px;
    z-index: 30;
    background: rgba(0, 0, 0, 0.25);
    backdrop-filter: blur(2px);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 10px;
    pointer-events: none;
    /* HUD shouldn’t eat mouse */
}

.camera-position-plot {
    top: 12px;
}

.density-plot {
    top: 204px;
}

.show-math { margin: .75rem 0; border: 1px solid #2b3445; border-radius: 8px; }
.show-math > summary { cursor: pointer; padding: .5rem .75rem; font-weight: 600; }
.show-math[open] > summary { border-bottom: 1px solid #2b3445; }
.show-math > div { padding: .75rem .9rem; }

details.show-math { margin:.75rem 0; border:1px solid #2b3445; border-radius:8px }
details.show-math > summary { cursor:pointer; padding:.5rem .75rem; font-weight:600 }
details.show-math[open] > summary { border-bottom:1px solid #2b3445 }
details.show-math > div { padding:.75rem .9rem }

/* desktop vs. mobile gets the last word */
.only-mobile {
    display: none;
}

.only-desktop {
    display: inline;
}

@media (max-width: 700px) {
    .only-mobile {
        display: inline;
    }

    .only-desktop {
        display: none;
    }
}